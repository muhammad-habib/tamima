<!-- STYCKY PORTLET CONTROL | See structure => /metronic/sticky-form-actions -->
<m-portlet [options]="{headLarge: true}">
		<!-- PORTLET LOADING | Binded to TABLE Datasource -->
		<!-- See prop => '../../_core/models/data-sources/_base.datasource.ts' (loading$) -->

		<!-- start::Header (attributtes: mPortletHeadTitle|mPortletHeadTools) -->
		<ng-container mPortletHeadTitle>
			<div class="m-portlet__head-title">
				<h3 class="m-portlet__head-text">
					<span translate="ECOMMERCE.MARKETS.MARKETS_LIST">Markets list</span>
				</h3>
			</div>
			<!-- For localisations we use @ngx-translate | See off. documentations => https://github.com/ngx-translate/core -->
			<!-- Localization libraries (en/fr) are here => '../../../.././config/i18n/en.ts|fr.ts' -->
		</ng-container>

		<ng-container mPortletHeadTools>
			<!-- Buttons (Material Angular) | See off.documenations 'https://material.angular.io/components/button/overview' -->
			<!-- mat-raised-button | Rectangular contained button w/ elevation  -->
		</ng-container>
		<!-- end::Header -->

		<!-- start::Body (attribute: mPortletBody) -->
		<ng-container mPortletBody>
			<!-- start::FILTERS & GROUP ACTIONS -->
			<!-- end::FILTERS & GROUP ACTIONS -->

			<!-- MATERIAL TABLE | Binded to datasources -->
			<!-- See off.documentations 'https://material.angular.io/components/table/overview' -->
			<div class="example-container mat-elevation-z8" style="height: 37rem;overflow-y: scroll;"
				 scrollable (scrollPosition)="scrollHandler($event)"
			>
				<mat-table class="" [dataSource]="page.data" matSort matSortActive="id" matSortDirection="asc" matSortDisableClear>
					<!-- Checkbox Column -->

					<!-- Table with selection -->
					<!-- https://run.stackblitz.com/api/angular/v1?file=app%2Ftable-selection-example.ts -->

					<ng-container matColumnDef="select">
						<mat-header-cell *matHeaderCellDef class="mat-column-checkbox">
							<mat-checkbox (change)="$event ? masterToggle() : null"
								[checked]="selection.hasValue() && isAllSelected()"
								[indeterminate]="selection.hasValue() && !isAllSelected()">
							</mat-checkbox>
						</mat-header-cell>
						<mat-cell *matCellDef="let row" class="mat-column-checkbox">
							<mat-checkbox (click)="$event.stopPropagation()" (change)="$event ? selection.toggle(row) : null" [checked]="selection.isSelected(row)">
							</mat-checkbox>
						</mat-cell>
					</ng-container>

						<!-- ATTRIBUTE mat-sort-header  for sorting | https://material.angular.io/components/sort/overview -->
					<ng-container matColumnDef="id">
						<mat-header-cell *matHeaderCellDef mat-sort-header>ID</mat-header-cell>
						<mat-cell *matCellDef="let market">{{market.id}}</mat-cell>
					</ng-container>

					<ng-container matColumnDef="name">
						<mat-header-cell *matHeaderCellDef mat-sort-header>Name</mat-header-cell>
						<mat-cell *matCellDef="let market">{{market.name}}</mat-cell>
					</ng-container>
					<ng-container matColumnDef="photo">
						<mat-header-cell *matHeaderCellDef mat-sort-header>Photo</mat-header-cell>
						<mat-cell *matCellDef="let market">
							<img width="60" height="50" src="{{market.photo}}" class="m--img-rounded m--marginless" alt="" />
						</mat-cell>
					</ng-container>
					<ng-container matColumnDef="licencePhoto">
							<mat-header-cell *matHeaderCellDef mat-sort-header>licencePhoto</mat-header-cell>
							<mat-cell *matCellDef="let market">
								<img width="60" height="50" src="{{market.licencePhoto}}" class="m--img-rounded m--marginless" alt="" />
							</mat-cell>
						</ng-container>
						<ng-container matColumnDef="country">
						<mat-header-cell *matHeaderCellDef mat-sort-header>Country</mat-header-cell>
						<mat-cell *matCellDef="let market">{{market.country}}</mat-cell>
					</ng-container>

					<ng-container matColumnDef="phone">
						<mat-header-cell *matHeaderCellDef mat-sort-header>Phone</mat-header-cell>
						<mat-cell *matCellDef="let market">{{market.phone}}</mat-cell>
					</ng-container>

					<ng-container matColumnDef="blocked">
						<mat-header-cell *matHeaderCellDef mat-sort-header>Status</mat-header-cell>
						<mat-cell *matCellDef="let market">
							<span class="m-badge m-badge--{{ getItemCssClassByStatus(market.blocked) }} m-badge--wide">{{  getItemStatusString(market.blocked) }}</span>
						</mat-cell>
					</ng-container>

					<ng-container matColumnDef="actions">
						<mat-header-cell *matHeaderCellDef>Actions</mat-header-cell>
						<mat-cell *matCellDef="let market">
								<a [routerLink]="['/ecommerce/products/edit']" [queryParams]="{id: market.marketId}" mat-icon-button color="primary" matTooltip="Edit market">
									<mat-icon>create</mat-icon>
								</a>&nbsp;
							<button mat-icon-button color="warn" matTooltip="Delete market" type="button" (click)="deleteMarket(market)"><mat-icon>delete</mat-icon></button>&nbsp;

							<button *ngIf="market.blocked"  mat-icon-button color="warn" matTooltip="un block market" type="button" (click)="toggleMarketBlock(market)">
									<mat-icon >lock_open</mat-icon></button>
							<button *ngIf="!market.blocked"  mat-icon-button color="warn" matTooltip="block market" type="button" (click)="toggleMarketBlock(market)">
									<mat-icon >lock</mat-icon></button>
						</mat-cell>
					</ng-container>

					<mat-header-row *matHeaderRowDef="displayedColumns; sticky: true"></mat-header-row>
					<mat-row *matRowDef="let row; columns: displayedColumns"></mat-row>
				</mat-table>
			</div>
		</ng-container>
		<!-- end::Body -->

	</m-portlet>


